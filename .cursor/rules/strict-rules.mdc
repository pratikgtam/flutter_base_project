---
alwaysApply: true
---

# Strict Rules

## Architecture & Logic

- **Strictly Separate Concerns:** UI belongs in `Views`; Business Logic belongs in `Cubits` or `Repositories`.
- **State Management:** Use Cubits/Blocs for all state changes. UI widgets should be stateless wherever possible.
- **Single Responsibility:** Keep functions and widgets short and focused on one task.

## Code Organization

### Feature Structure

Each feature follows the same structure:

```text
feature_name/
├── cubits/        # State management
├── repositories/  # Data layer
└── views/         # UI layer
```

## Reusability & DRY

- **Check Shared First:** Before coding a new widget, check `shared/widgets/`.
- **Rule of Two:** If a logic block or widget is needed in 2+ places, extract it to `shared/` immediately.
- **Centralize Configuration:** Never hard-code colors, strings, or dimensions. Use central theme/constant files.

### Rules for UI

### 1. Separation of Concerns

- **UI Only:** Views must contain **zero** business logic.
- **Delegate:** All logic, state transitions, and data orchestration must be delegated to **Cubits**.
- **No Direct Data Access:** Views never call Repositories or APIs directly.

### 2. The Reusability Principle (DRY)

- **2+ Rule:** If a widget is used in 2 or more places, it **must** be moved to `shared/widgets/`. Do not create functions for widgets, create new stateless widget classes. Widget should be in a separate file.
- **No Duplication:** Never copy-paste widget code. Extract it into a new file in the shared layer instead.
- **Atomic Design:** Break complex screens into smaller, reusable private widgets within the same file, or public widgets in `shared/` if applicable.

### 5. Styling & Assets

- **Centralized Theme:** Use `shared/` for colors and other styling. Avoid hardcoded hex codes in views.
- **Asset Pathing:** Reference images from `generated/assets.gen.dart/` as configured in the project.

## File Structure

- **Organization:** Maintain a distinct separation between `features/`, `core/`, and `shared/` layers.

## API calls

- After doing the api call always handle the error case by showing snackbar. While loading, show loading indicator as well.
- For error handling use AppException
- always use listenWhen, eg: (previous, current) =>
            previous.signupResult != current.signupResult,
- create separate function for listener and listenWhen

## Styling & Theming

For color use from app colors. List all the colors there and use from there.

## Other rules

- Donot hardcode any string. Use from app_strings.dart or create enums
- For navigation use go_router package and do not pass any data through constructor. Use state management to pass data.
- navigation code should be context.pushNamed(SecurityAndPasswordView.routeName); do not use context.push('/securityAndPassword');
